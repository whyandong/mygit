# shell脚本基础知识
## 1 $相关参数
命令行参数\$0～\$9\$(10)  
命令行个数 \$#  
\${!#} 获取最后一个参数值的写法，是\${!n}扩展写法  
\$*  所有命令行参数一个整体 使用时要用引号  
\$@   所有命令行参数  多个整体  使用时要用引号  
\$? 返回执行执行结果  
## 2 脚本比较符号助记
-eq   equql  
-ne   not equal  
-gt   greater than  
-lt   less than  
-ge  greater equal  
-le  less equal  
-n   Non-zero   non-empty  
-z   zero       zero length  
-nt   newer than  
-ot   older than  
-O     Owner  
-G    Group  
-e    exist  
-d   directory  
-f   file  
-s   文件存在且大小》0 size  
## 3 shell脚本中括号的使用分类对比表
### Shell 脚本中的括号及变体总览（POSIX/旧式/新式）
---
| 表达式               | 类型         | 用途/功能                         | POSIX 标准 | 是否旧式写法 | 是否 Bash 新式写法 | 说明 |
|----------------------|--------------|-----------------------------------|-------------|----------------|---------------------|------|
| `[ ... ]`            | 方括号       | 条件判断（等同 `test` 命令）     | ✅ 是        | ✅ 是           | ❌ 否                | 经典写法，兼容性好 |
| `[[ ... ]]`          | 双方括号     | 增强条件判断（支持 `&&`, `\|\|`）  | ❌ 否        | ❌ 否           | ✅ 是                | Bash/Ksh 新式写法 |
| `{ ... ;}`           | 花括号命令组 | 当前 Shell 中的命令块             | ✅ 是        | ✅ 是           | ❌ 否                | 注意结尾需 `;` 或换行 |
| `${var}`             | 花括号变量   | 参数替换                          | ✅ 是        | ✅ 是           | ❌ 否                | 所有 Shell 支持 |
| `${var:-default}`    | 花括号扩展   | 默认值设置、参数处理              | ✅ 是        | ✅ 是           | ❌ 否                | POSIX 支持的变量展开 |
| `${var:1:3}`         | 花括号截取   | 子串提取                          | ❌ 否        | ❌ 否           | ✅ 是                | 仅 Bash 支持 |
| `{1..10}`            | Brace 扩展   | 序列生成/文件展开                 | ❌ 否        | ❌ 否           | ✅ 是                | Bash Brace Expansion |
| `( ... )`            | 圆括号       | 子 Shell 命令组                   | ✅ 是        | ✅ 是           | ❌ 否                | 会创建子进程 |
| `(( ... ))`          | 算术命令     | 整数运算/条件判断（作为语句）     | ❌ 否        | ❌ 否           | ✅ 是                | Bash/Ksh 支持 |
| `$(( ... ))`         | 算术扩展     | 整数运算（结果返回字符串）        | ✅ 是        | ❌ 否           | ✅ 是                | POSIX 支持算术扩展 |
| `$[ ... ]`           | 旧式算术扩展 | 早期整数运算写法（已弃用）        | ❌ 否        | ✅ 是(已弃用)    | ❌ 否                | Bash 早期支持，不推荐
---
### 4 source相关
- source与传统脚本执行方式对比
---
  | **行为**               | `source script.sh`          | `./script.sh` 或 `bash script.sh`         |
|------------------------|-----------------------------|------------------------------------------|
| **执行环境**           | 当前 Shell 环境             | 子 Shell 环境                            |
| **变量/函数影响**      | 修改当前 Shell 的变量/函数   | 仅在子 Shell 中生效，退出后消失           |
| **用途**               | 加载配置、定义函数/别名      | 运行独立任务                             |
---
- source和点操作符对比  
| **Shell 类型**       | `source` 支持         | `.` 操作符支持       |
|-----------------------|-----------------------|-----------------------|
| **Bash**              | ✅ 支持               | ✅ 支持               |
| **POSIX Shell（sh）** | ❌ 不支持（除非 Bash 兼容模式） | ✅ 支持（POSIX 标准） |
| **Zsh/Ksh**           | ✅ 支持               | ✅ 支持               |
在脚本中建议用source


